<!doctype html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<title>JSON Manager</title>
<link rel="stylesheet" href="./css/JSONManager.css" />
</head>
<body>
<main>
	<!-- Header -->
	<header>
		<h1><a href="./">JSON Manager</a></h1>
	</header>
	<!-- // Header -->

	<div>
		<!-- JSON editor index -->
		<div class="jsonEditorIndex">
			<ul>
				<li type="Object" loc="root" class="on">
					<dl>
						<dt>
							<button type="button" role="control">control</button>
							<button type="button" role="toggle">toggle</button>
							<em class="no">0</em><strong data-ph="Object"></strong><span class="type"></span><em class="count">0</em>
						</dt>
					</dl>
					<ul></ul>
				</li>
			</ul>
		</div>
		<!-- // JSON editor index -->

		<!-- JSON Result -->
		<nav class="btngroup">
			<button type="button" role="btn_toJSON">Export JSON</button>
		</nav>
		<pre id="result"></pre>
		<!-- // JSON Result -->
	</div>

	<!-- JSON editor context -->
	<nav class="jsonEditorContext">
		<ul>
			<li role="Type">
				<div>
					<ul>
						<li role="Object">
							<button type="button">Object</button>
						</li>
						<li role="Array">
							<button type="button">Array</button>
						</li>
						<li role="String">
							<button type="button">String</button>
						</li>
					</ul>
				</div>
				<button type="button">Type</button>
			</li>
			<li role="Insert">
				<div>
					<ul>
						<li role="Object">
							<button type="button">Object</button>
						</li>
						<li role="Array">
							<button type="button">Array</button>
						</li>
						<li role="String">
							<button type="button">String</button>
						</li>
					</ul>
				</div>
				<button type="button">Insert</button>
			</li>
			<li role="Duplicate">
				<button type="button">Duplicate</button>
			</li>
			<li role="Remove">
				<button type="button">Remove</button>
			</li>
		</ul>
	</nav>
	<!-- // JSON editor context -->
</main>

<script src="./js/jquery-2.1.1.min.js"></script>
<script src="./js/jquery-sortable.min.js"></script>
<script src="./js/Util.min.js"></script>
<script src="./js/IndexEvent.min.js"></script>
<script src="./js/ContextEvent.min.js"></script>
<script>
jQuery(function($){
	var
		$index = $('div.jsonEditorIndex')
		,$context = $('nav.jsonEditorContext')
		,$root = $index.find('li[loc=root]')
		,context = new ContextEvent({
			context : $context
			,index : $index
		})
		,index = new IndexEvent({
			index : $index
			,context : $context
			,_context : context
		})
	;

	// dummy data import
	var dummy = '{"사과":"빨간색", "바나나":"노란색", "키위":"녹색", "포도":"보라색"}';

	// import json
	try {
		var json = JSON.parse(dummy);
	}
	catch(e) {
		var json = new Object();
	}
	if (Array.isArray(json))
	{
		index.typeItem({
			active : $root,
			type : 'Array'
		});
	}
	index.importJSON(json, $root);

	// Export JSON button event
	$('button[role=btn_toJSON]').on('click', function(){
		$('#result').text(index.exportJSON(5));
	});
});
</script>
</body>
</html>